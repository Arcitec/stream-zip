from datetime import datetime
from stream_zip import stream_zip


def test_dummy():
    now = datetime.fromisoformat('2021-01-01 21:01:12')

    def files():
        yield 'file-1', now, (b'a', b'b')
        yield 'file-2', now, (b'c', b'd')

    expected = b'PK\x03\x04-\x00\x08\x00\x08\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\x06\x00\x14\x00file-1\x01\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00x\xdaKL\x02\x00\x01&\x00\xc4PK\x07\x08mH\x83\x9e\n\x00\x00\x00\x00\x00\x00\x00\x02\x00\x00\x00\x00\x00\x00\x00PK\x03\x04-\x00\x08\x00\x08\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\x06\x00\x14\x00file-2\x01\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00x\xdaKN\x01\x00\x01,\x00\xc8PK\x07\x08\xda\x8f\xd6E\n\x00\x00\x00\x00\x00\x00\x00\x02\x00\x00\x00\x00\x00\x00\x00PK\x01\x02file-12021-01-01 21:01:12PK\x01\x02file-22021-01-01 21:01:12'
    assert expected == b''.join(stream_zip(files()))
